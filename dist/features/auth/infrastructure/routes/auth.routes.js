"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = require("express");
const AuthController_1 = require("../controllers/AuthController");
const validateSchema_1 = require("@/shared/infrastructure/validation/validateSchema");
const authSchema_1 = require("@/shared/infrastructure/validation/authSchema");
const AuthRepository_1 = require("../repositories/AuthRepository");
const JwtService_1 = require("@/shared/infrastructure/services/JwtService");
const HashService_1 = require("@/shared/infrastructure/services/HashService");
const RegisterUseCase_1 = require("../../application/usecases/RegisterUseCase");
const LoginUseCase_1 = require("../../application/usecases/LoginUseCase");
const RefreshTokenUseCase_1 = require("../../application/usecases/RefreshTokenUseCase");
const router = (0, express_1.Router)();
const authRepository = new AuthRepository_1.AuthRepository();
const hashService = new HashService_1.HashService();
const jwtService = new JwtService_1.JwtService();
const registerUseCase = new RegisterUseCase_1.RegisterUseCase(authRepository, hashService, jwtService);
const loginUseCase = new LoginUseCase_1.LoginUseCase(authRepository, hashService, jwtService);
const refreshTokenUseCase = new RefreshTokenUseCase_1.RefreshTokenUseCase(authRepository, jwtService);
const authController = new AuthController_1.AuthController(loginUseCase, registerUseCase, refreshTokenUseCase);
router.post("/register", (0, validateSchema_1.validateSchema)(authSchema_1.registerSchema), authController.register);
router.post("/login", (0, validateSchema_1.validateSchema)(authSchema_1.loginSchema), authController.login);
router.post("/refresh-token", (0, validateSchema_1.validateSchema)(authSchema_1.refreshTokenSchema), authController.refreshToken);
exports.default = router;
//# sourceMappingURL=auth.routes.js.map